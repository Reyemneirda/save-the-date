<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Save the Date</title>

    <!-- 
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘         SAVE THE DATE MULTILINGUE + RSVP â€” MODE D'EMPLOI           â•‘
    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
    â•‘                                                                      â•‘
    â•‘  ðŸŒ LANGUES : FR, EN, HE (RTL), RU â€” dÃ©tection auto navigateur    â•‘
    â•‘                                                                      â•‘
    â•‘  ðŸ“‹ DÃ‰PLOIEMENT GITHUB PAGES :                                      â•‘
    â•‘  1. CrÃ©e un repo GitHub (ex: "save-the-date")                       â•‘
    â•‘  2. Pousse ce fichier "index.html" sur la branche main              â•‘
    â•‘  3. Settings > Pages > Source: main > Save                          â•‘
    â•‘  4. â†’ https://TON-USERNAME.github.io/save-the-date                  â•‘
    â•‘                                                                      â•‘
    â•‘  ðŸ“Š CONNEXION GOOGLE SHEETS :                                       â•‘
    â•‘                                                                      â•‘
    â•‘  Ton Sheet1 a ces colonnes :                                        â•‘
    â•‘  A: First Name | B: Last Name | C: Guests | D: Phone Number        â•‘
    â•‘  E: Telegram username | F: Comes ? | G: Parking lot                â•‘
    â•‘  H: Email | I: Statut RSVP | J: Total (formule)                   â•‘
    â•‘  K: Restrictions alimentaires | L: Message                          â•‘
    â•‘  M: Date de rÃ©ponse | N: lang                                      â•‘
    â•‘                                                                      â•‘
    â•‘  Le script Apps Script ci-dessous cherche l'invitÃ© par              â•‘
    â•‘  PrÃ©nom + Nom dans Sheet1, puis remplit les colonnes :              â•‘
    â•‘  C (Guests), F (Comes âœ“/âœ—), G (Parking âœ“/âœ—), H (Email),             â•‘
    â•‘  I (Statut), J (Total = formule), K (Restrictions),                â•‘
    â•‘  L (Message), M (Date), N (lang)                                   â•‘
    â•‘                                                                      â•‘
    â•‘  Ã‰TAPE 1 â€” Dans ton Google Sheet :                                  â•‘
    â•‘    Extensions > Apps Script                                          â•‘
    â•‘    Supprime tout et colle le contenu de apps-script.js               â•‘
    â•‘                                                                      â•‘
    â•‘  Colonnes (getRange = 1-based) :                                     â•‘
    â•‘    C(3):  Guests          â€” Number                                   â•‘
    â•‘    F(6):  Comes?          â€” true/false (checkbox)                    â•‘
    â•‘    G(7):  Parking         â€” true/false (checkbox)                    â•‘
    â•‘    H(8):  Email           â€” String                                   â•‘
    â•‘    I(9):  Statut RSVP     â€” "Confirmed" / "Declined"                â•‘
    â•‘    J(10): Total           â€” FORMULE, NE PAS TOUCHER                 â•‘
    â•‘    K(11): Restrictions    â€” String                                   â•‘
    â•‘    L(12): Message         â€” String                                   â•‘
    â•‘    M(13): Date de rÃ©ponse â€” Date                                    â•‘
    â•‘    N(14): lang            â€” String                                   â•‘
    â•‘                                                                      â•‘
    â•‘  Ã‰TAPE 2 â€” DÃ©ployer :                                               â•‘
    â•‘    Clic "DÃ©ployer" > "Nouveau dÃ©ploiement"                          â•‘
    â•‘    Type : "Application Web"                                          â•‘
    â•‘    ExÃ©cuter en tant que : "Moi"                                     â•‘
    â•‘    AccÃ¨s : "Tout le monde"                                           â•‘
    â•‘    â†’ Copie l'URL et colle-la dans APPS_SCRIPT_URL ci-dessous       â•‘
    â•‘                                                                      â•‘
    â•‘  ðŸŽ¨ PERSONNALISATION :                                              â•‘
    â•‘  Cherche "PERSONNALISE ICI" dans le JS pour modifier les prÃ©noms,  â•‘
    â•‘  la date, le lieu, les couleurs, etc.                               â•‘
    â•‘                                                                      â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    -->

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Josefin+Sans:wght@300;400&family=Frank+Ruhl+Libre:wght@300;400&family=Cormorant+Infant:ital,wght@0,300;0,400;1,300;1,400&display=swap"
      rel="stylesheet"
    />

    <style>
      /* ============================================= */
      /*   ðŸŽ¨ PERSONNALISE ICI â€” COULEURS & THÃˆME     */
      /* ============================================= */
      :root {
        --color-bg: #faf7f2;
        --color-text: #1e1810;
        --color-accent: #96700a;
        --color-accent-soft: #d4a94b;
        --color-muted: #3d3530;
        --color-line: #d4c5b0;
        --color-white: #ffffff;
        --color-error: #c0392b;
        --color-success: #5d8a3c;

        --font-display: "Cormorant Garamond", serif;
        --font-body: "Josefin Sans", sans-serif;
      }

      [dir="rtl"] {
        --font-display: "Frank Ruhl Libre", "Cormorant Garamond", serif;
        --font-body: "Frank Ruhl Libre", "Josefin Sans", sans-serif;
      }

      [data-lang="ru"] {
        --font-display: "Cormorant Infant", "Cormorant Garamond", serif;
      }

      /* ============================================= */
      /*               RESET & BASE                    */
      /* ============================================= */
      *,
      *::before,
      *::after {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      html {
        scroll-behavior: smooth;
      }

      body {
        font-family: var(--font-body);
        color: var(--color-text);
        background-color: #1a1510;
        min-height: 100vh;
        min-height: 100dvh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 2rem;
        overflow-x: hidden;
        gap: 100vh;
        -webkit-overflow-scrolling: touch;
      }

      body::before {
        content: "";
        position: fixed;
        inset: 0;
        background: url("grid-background-mobile-color.jpg") center / cover
          no-repeat;
        pointer-events: none;
        z-index: -1;
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
      }

      /* ============================================= */
      /*         SÃ‰LECTEUR DE LANGUE                    */
      /* ============================================= */
      .top-bar {
        position: fixed;
        top: 1.2rem;
        right: 1.5rem;
        z-index: 100;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        animation: fadeIn 1.5s ease-out 1.4s both;
      }

      [dir="rtl"] .top-bar {
        right: auto;
        left: 1.5rem;
      }

      .lang-switcher {
        display: flex;
        gap: 0.4rem;
      }

      .music-btn {
        background: var(--color-accent);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 2px solid var(--color-accent);
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        border-radius: 50%;
        color: var(--color-white);
        font-size: 1rem;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);
        animation: pulse-music 2s ease-in-out infinite;
      }

      @keyframes pulse-music {
        0%, 100% { transform: scale(1); box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15); }
        50% { transform: scale(1.12); box-shadow: 0 2px 20px rgba(0, 0, 0, 0.25); }
      }

      .music-btn:hover {
        transform: scale(1.1);
      }

      .music-btn.playing {
        animation: none;
        background: var(--color-accent);
        border-color: var(--color-accent);
        color: var(--color-white);
      }

      .lang-btn {
        background: rgba(255, 255, 255, 0.65);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.4);
        padding: 0.35rem 0.6rem;
        font-family: var(--font-body);
        font-size: 0.65rem;
        letter-spacing: 0.05em;
        color: var(--color-muted);
        cursor: pointer;
        transition: all 0.3s ease;
        border-radius: 6px;
      }

      .lang-btn:hover {
        border-color: var(--color-accent);
        color: var(--color-accent);
      }

      .lang-btn.active {
        background: var(--color-accent);
        border-color: var(--color-accent);
        color: var(--color-white);
      }

      /* ============================================= */
      /*            CARTE (commune)                     */
      /* ============================================= */
      .card {
        position: relative;
        z-index: 1;
        max-width: 620px;
        width: 100%;
        padding: 4rem 3rem;
        text-align: center;
        background: rgba(255, 255, 255, 0.52);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.35);
        border-radius: 16px;
        box-shadow:
          0 1px 3px rgba(0, 0, 0, 0.06),
          0 20px 60px rgba(0, 0, 0, 0.08);
        animation: cardReveal 1.2s ease-out both;
        margin-top: 1rem;
        margin-bottom: 1rem;
      }

      .card::before {
        content: "";
        position: absolute;
        inset: 12px;
        border: 1px solid var(--color-accent-soft);
        border-radius: 10px;
        opacity: 0.35;
        pointer-events: none;
      }

      .card::after {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 16px;
        box-shadow: inset 0 0 40px 10px rgba(255, 255, 255, 0.25);
        pointer-events: none;
      }

      .card-rsvp {
        animation-delay: 0.2s;
      }

      /* Fleche de scroll animee */
      .scroll-hint {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        margin: -3rem 0;
        z-index: 2;
        position: relative;
      }

      .scroll-hint-text {
        font-family: var(--font-body);
        font-size: 0.65rem;
        font-weight: 400;
        letter-spacing: 0.3em;
        text-transform: uppercase;
        color: rgba(255, 255, 255, 0.85);
        text-shadow: 0 1px 6px rgba(0, 0, 0, 0.5);
      }

      .scroll-hint-arrow {
        width: 24px;
        height: 24px;
        border-right: 2px solid rgba(255, 255, 255, 0.8);
        border-bottom: 2px solid rgba(255, 255, 255, 0.8);
        transform: rotate(45deg);
        animation: scrollBounce 2s ease-in-out infinite;
        filter: drop-shadow(0 1px 4px rgba(0, 0, 0, 0.4));
      }

      @keyframes scrollBounce {
        0%,
        100% {
          transform: rotate(45deg) translateY(0);
          opacity: 1;
        }
        50% {
          transform: rotate(45deg) translateY(8px);
          opacity: 0.5;
        }
      }

      @keyframes cardReveal {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* ============================================= */
      /*        SECTION SAVE THE DATE                   */
      /* ============================================= */
      .eyebrow {
        font-family: var(--font-body);
        font-size: 0.7rem;
        font-weight: 400;
        letter-spacing: 0.35em;
        text-transform: uppercase;
        color: var(--color-muted);
        margin-bottom: 2rem;
        animation: fadeUp 1s ease-out 0.3s both;
      }

      .ornament {
        display: block;
        margin: 0 auto 1.5rem;
        width: 80px;
        height: auto;
        opacity: 0.5;
        color: var(--color-accent);
        animation: fadeUp 1s ease-out 0.4s both;
      }

      .names {
        font-family: var(--font-display);
        font-weight: 400;
        font-size: clamp(2.2rem, 6vw, 3.4rem);
        line-height: 1.2;
        color: var(--color-text);
        margin-bottom: 0.5rem;
        text-shadow: 0 1px 3px rgba(255, 255, 255, 0.6);
        animation: fadeUp 1s ease-out 0.5s both;
      }

      .names .ampersand {
        display: block;
        font-style: italic;
        font-size: 0.5em;
        color: var(--color-accent);
        margin: 0.3em 0;
      }

      .divider {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin: 2rem auto;
        max-width: 280px;
        animation: fadeUp 1s ease-out 0.6s both;
      }

      .divider::before,
      .divider::after {
        content: "";
        flex: 1;
        height: 1px;
        background: var(--color-line);
      }

      .divider-icon {
        color: var(--color-accent);
        font-size: 0.9rem;
      }

      .date {
        font-family: var(--font-body);
        font-size: 1.8rem;
        font-weight: 400;
        letter-spacing: 0.25em;
        text-transform: uppercase;
        color: var(--color-text);
        margin-top: 1rem;
        text-shadow: 0 1px 3px rgba(255, 255, 255, 0.6);
        animation: fadeUp 1s ease-out 0.7s both;
      }

      .venue {
        font-family: var(--font-display);
        font-style: italic;
        font-size: 1.15rem;
        font-weight: 400;
        color: var(--color-muted);
        margin-top: 0.6rem;
        animation: fadeUp 1s ease-out 0.8s both;
      }

      .venue-map {
        margin-top: 1rem;
        animation: fadeUp 1s ease-out 0.85s both;
        width: 100%;
        max-width: 420px;
        margin-left: auto;
        margin-right: auto;
      }

      .venue-map iframe {
        width: 100%;
        height: 250px;
        border: 1px solid var(--color-border, #d5c9b8);
        border-radius: 10px;
      }

      .nav-buttons {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-top: 1rem;
        animation: fadeUp 1s ease-out 0.9s both;
      }

      .nav-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 44px;
        height: 44px;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        text-decoration: none;
        transition:
          transform 0.2s ease,
          box-shadow 0.2s ease;
      }

      .nav-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .nav-btn svg {
        width: 28px;
        height: 28px;
      }

      .nav-btn--waze {
        background: #33ccff;
        color: #fff;
      }

      .nav-btn--gmaps {
        background: #4285f4;
        color: #fff;
      }

      .countdown {
        display: flex;
        justify-content: center;
        gap: 1.5rem;
        margin-top: 2rem;
        animation: fadeUp 1s ease-out 1.1s both;
      }

      .countdown-item {
        text-align: center;
      }

      .countdown-number {
        font-family: var(--font-display);
        font-size: 2rem;
        font-weight: 400;
        color: var(--color-accent);
        line-height: 1;
        text-shadow: 0 1px 3px rgba(255, 255, 255, 0.6);
      }

      .countdown-label {
        font-family: var(--font-body);
        font-size: 0.6rem;
        font-weight: 400;
        letter-spacing: 0.2em;
        text-transform: uppercase;
        color: var(--color-muted);
        margin-top: 0.3rem;
      }

      .message {
        font-family: var(--font-display);
        font-size: 1.05rem;
        font-weight: 400;
        line-height: 1.8;
        color: var(--color-muted);
        margin-top: 2rem;
        font-style: italic;
        max-width: 400px;
        margin-left: auto;
        margin-right: auto;
        animation: fadeUp 1s ease-out 1.2s both;
      }

      .scroll-arrow {
        display: inline-block;
        margin-top: 2.5rem;
        padding: 0.8rem 2.5rem;
        font-family: var(--font-body);
        font-size: 0.7rem;
        font-weight: 400;
        letter-spacing: 0.3em;
        text-transform: uppercase;
        text-decoration: none;
        color: var(--color-accent);
        border: 1px solid var(--color-accent);
        cursor: pointer;
        transition: all 0.4s ease;
        animation: fadeUp 1s ease-out 1.3s both;
        background: none;
        border-radius: 8px;
      }

      .scroll-arrow:hover {
        background: var(--color-accent);
        color: var(--color-white);
      }

      /* ============================================= */
      /*          FORMULAIRE RSVP                       */
      /* ============================================= */
      .form-title {
        font-family: var(--font-display);
        font-weight: 400;
        font-size: 1.8rem;
        color: var(--color-text);
        margin-bottom: 0.5rem;
        text-shadow: 0 1px 3px rgba(255, 255, 255, 0.6);
      }

      .form-subtitle {
        font-family: var(--font-body);
        font-size: 0.7rem;
        font-weight: 400;
        letter-spacing: 0.2em;
        text-transform: uppercase;
        color: var(--color-muted);
        margin-bottom: 2.5rem;
      }

      .form-group {
        margin-bottom: 1.5rem;
        text-align: left;
      }

      [dir="rtl"] .form-group {
        text-align: right;
      }

      .form-label {
        display: block;
        font-family: var(--font-body);
        font-size: 0.65rem;
        font-weight: 400;
        letter-spacing: 0.2em;
        text-transform: uppercase;
        color: var(--color-muted);
        margin-bottom: 0.5rem;
      }

      .form-input,
      .form-select,
      .form-textarea {
        width: 100%;
        padding: 0.75rem 1rem;
        font-family: var(--font-body);
        font-size: 0.85rem;
        font-weight: 300;
        color: var(--color-text);
        background: rgba(255, 255, 255, 0.7);
        border: 1px solid rgba(212, 197, 176, 0.7);
        border-radius: 8px;
        outline: none;
        transition: border-color 0.3s ease;
        -webkit-appearance: none;
        appearance: none;
      }

      .form-input:focus,
      .form-select:focus,
      .form-textarea:focus {
        border-color: var(--color-accent);
      }

      .form-textarea {
        resize: vertical;
        min-height: 80px;
      }

      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
      }

      /* Checkbox parking */
      .form-checkbox-group {
        margin-bottom: 1.5rem;
        text-align: left;
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      [dir="rtl"] .form-checkbox-group {
        text-align: right;
        flex-direction: row-reverse;
      }

      .form-checkbox {
        width: 18px;
        height: 18px;
        accent-color: var(--color-accent);
        cursor: pointer;
        flex-shrink: 0;
      }

      .form-checkbox-label {
        font-family: var(--font-body);
        font-size: 0.8rem;
        font-weight: 300;
        color: var(--color-text);
        cursor: pointer;
      }

      /* Toggle "Je viens / Je ne viens pas" */
      .comes-toggle {
        display: flex;
        gap: 0.5rem;
        margin-top: 0.3rem;
      }

      .comes-btn {
        flex: 1;
        padding: 0.65rem 1rem;
        font-family: var(--font-body);
        font-size: 0.8rem;
        font-weight: 300;
        border: 1px solid var(--color-line);
        border-radius: 8px;
        background: rgba(255, 255, 255, 0.5);
        color: var(--color-muted);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .comes-btn:hover {
        border-color: var(--color-accent);
        color: var(--color-accent);
      }

      .comes-btn.active {
        border-color: var(--color-accent);
        background: var(--color-accent);
        color: var(--color-white);
      }

      #comes-details {
        transition:
          opacity 0.3s ease,
          max-height 0.3s ease;
        overflow: hidden;
      }

      #comes-details.hidden {
        opacity: 0;
        max-height: 0;
        margin: 0;
        pointer-events: none;
      }

      .form-submit {
        display: inline-block;
        margin-top: 1.5rem;
        padding: 0.9rem 3rem;
        font-family: var(--font-body);
        font-size: 0.7rem;
        font-weight: 400;
        letter-spacing: 0.3em;
        text-transform: uppercase;
        color: var(--color-accent);
        background: none;
        border: 1px solid var(--color-accent);
        cursor: pointer;
        transition: all 0.4s ease;
        border-radius: 8px;
      }

      .form-submit:hover:not(:disabled) {
        background: var(--color-accent);
        color: var(--color-white);
      }

      .form-submit:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .form-status {
        margin-top: 1.5rem;
        font-family: var(--font-body);
        font-size: 0.75rem;
        font-weight: 300;
        letter-spacing: 0.1em;
        min-height: 1.5em;
      }

      .form-status.sending {
        color: var(--color-muted);
      }
      .form-status.success {
        color: var(--color-success);
      }
      .form-status.error {
        color: var(--color-error);
      }

      .success-message {
        display: none;
        padding: 2rem 0;
      }

      .success-message.visible {
        display: block;
      }

      .success-icon {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        color: var(--color-accent);
      }

      .success-text {
        font-family: var(--font-display);
        font-size: 1.3rem;
        font-weight: 300;
        color: var(--color-text);
        margin-bottom: 0.5rem;
      }

      .success-sub {
        font-family: var(--font-body);
        font-size: 0.8rem;
        font-weight: 300;
        color: var(--color-muted);
      }

      /* ============================================= */
      /*            ANIMATIONS                          */
      /* ============================================= */
      @keyframes fadeUp {
        from {
          opacity: 0;
          transform: translateY(15px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      /* ============================================= */
      /*             RESPONSIVE                         */
      /* ============================================= */
      @media (max-width: 640px) {
        body {
          padding: 3rem 1.5rem;
          gap: 100vh;
        }
        .card {
          padding: 2.5rem 1.6rem;
          background: rgba(255, 255, 255, 0.48);
          backdrop-filter: blur(8px);
          -webkit-backdrop-filter: blur(8px);
        }
        .eyebrow {
          font-size: 0.8rem;
          letter-spacing: 0.25em;
        }
        .names {
          font-size: clamp(2.4rem, 7vw, 3.4rem);
        }
        .date {
          font-size: 1.6rem;
        }
        .venue {
          font-size: 1.2rem;
        }
        .message {
          font-size: 1.1rem;
        }
        .countdown {
          gap: 1rem;
        }
        .countdown-number {
          font-size: 1.8rem;
        }
        .countdown-label {
          font-size: 0.7rem;
        }
        .scroll-arrow {
          font-size: 0.8rem;
        }
        .form-title {
          font-size: 1.9rem;
        }
        .form-subtitle {
          font-size: 0.8rem;
        }
        .form-label {
          font-size: 0.75rem;
        }
        .form-input,
        .form-select,
        .form-textarea {
          font-size: 1rem;
          padding: 0.85rem 1rem;
        }
        .form-checkbox-label {
          font-size: 0.9rem;
        }
        .form-submit {
          font-size: 0.8rem;
          padding: 1rem 3rem;
        }
        .form-status {
          font-size: 0.85rem;
        }
        .form-row {
          grid-template-columns: 1fr;
        }
        .top-bar {
          top: 0.8rem;
          right: 0.8rem;
        }
        .lang-btn {
          font-size: 0.72rem;
          padding: 0.4rem 0.7rem;
        }
        .music-btn {
          width: 36px;
          height: 36px;
          font-size: 0.9rem;
        }
        [dir="rtl"] .top-bar {
          right: auto;
          left: 0.8rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- Barre fixe : musique + langue -->
    <div class="top-bar">
      <button class="music-btn" id="music-btn" onclick="toggleMusic()" aria-label="Play/Pause music">
        â–¶
      </button>
      <nav class="lang-switcher" aria-label="Language selector">
        <button class="lang-btn" data-lang="fr" onclick="setLang('fr')">
          FR
        </button>
        <button class="lang-btn" data-lang="en" onclick="setLang('en')">
          EN
        </button>
        <button class="lang-btn" data-lang="he" onclick="setLang('he')">
          ×¢×‘
        </button>
        <button class="lang-btn" data-lang="ru" onclick="setLang('ru')">
          Ð Ð£
        </button>
      </nav>
    </div>
    <audio id="bg-music" src="music.mp3" loop preload="auto"></audio>

    <!-- ============================================= -->
    <!--          CARTE 1 â€” SAVE THE DATE               -->
    <!-- ============================================= -->
    <main class="card">
      <p class="eyebrow" data-i18n="eyebrow"></p>

      <svg
        class="ornament"
        viewBox="0 0 100 30"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M50 15 C40 5, 20 0, 0 10"
          stroke="currentColor"
          stroke-width="0.8"
          fill="none"
          opacity="0.6"
        />
        <path
          d="M50 15 C60 5, 80 0, 100 10"
          stroke="currentColor"
          stroke-width="0.8"
          fill="none"
          opacity="0.6"
        />
        <path
          d="M50 15 C40 25, 20 30, 0 20"
          stroke="currentColor"
          stroke-width="0.8"
          fill="none"
          opacity="0.6"
        />
        <path
          d="M50 15 C60 25, 80 30, 100 20"
          stroke="currentColor"
          stroke-width="0.8"
          fill="none"
          opacity="0.6"
        />
        <circle cx="50" cy="15" r="2" fill="currentColor" opacity="0.4" />
      </svg>

      <h1 class="names" id="names"></h1>
      <div class="divider"><span class="divider-icon">âœ¦</span></div>
      <p class="date" data-i18n="date"></p>
      <p class="venue" data-i18n="venue"></p>

      <div class="venue-map">
        <iframe
          src="https://www.openstreetmap.org/export/embed.html?bbox=34.7505%2C32.0499%2C34.7585%2C32.0579&amp;layer=mapnik&amp;marker=32.05390%2C34.75458"
          loading="lazy"
          referrerpolicy="no-referrer"
          title="Beit Andromeda, Tel Aviv"
        >
        </iframe>
      </div>

      <div class="nav-buttons">
        <a
          class="nav-btn nav-btn--waze"
          href="https://waze.com/ul?ll=32.05390,34.75458&navigate=yes&zoom=17"
          target="_blank"
          rel="noopener noreferrer"
          title="Waze"
        >
          <svg
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            stroke="currentColor"
          >
            <path
              d="M12 2C7 2 3 5.6 3 10c0 2 .8 3.9 2.2 5.3L3.2 18.2c-.15.3.15.6.45.45l3-1.5C8.2 18 10 18.5 12 18.5c5 0 9-3.6 9-8.5C21 5.6 17 2 12 2z"
              fill="none"
              stroke-width="1.7"
              stroke-linejoin="round"
            />
            <circle cx="9" cy="9.5" r="1.3" stroke="none" />
            <circle cx="15" cy="9.5" r="1.3" stroke="none" />
            <path
              d="M8.5 13c.5 1.7 1.8 2.5 3.5 2.5s3-.8 3.5-2.5"
              fill="none"
              stroke-width="1.3"
              stroke-linecap="round"
            />
            <circle cx="8.5" cy="22" r="1.4" fill="none" stroke-width="1.4" />
            <circle cx="8.5" cy="22" r="0.45" stroke="none" />
            <circle cx="15.5" cy="22" r="1.4" fill="none" stroke-width="1.4" />
            <circle cx="15.5" cy="22" r="0.45" stroke="none" />
          </svg>
        </a>
        <a
          class="nav-btn nav-btn--gmaps"
          href="https://maps.app.goo.gl/w4T8jLC897ukvtBV8"
          target="_blank"
          rel="noopener noreferrer"
          title="Google Maps"
        >
          <svg
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
          >
            <path
              d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z"
            />
          </svg>
        </a>
      </div>

      <div class="countdown" id="countdown"></div>
      <p class="message" data-i18n="message"></p>

      <button
        class="scroll-arrow"
        data-i18n="rsvp_btn"
        onclick="
          document.getElementById('rsvp').scrollIntoView({ behavior: 'smooth' })
        "
      ></button>
    </main>

    <!-- Indicateur de scroll entre les cartes -->
    <div
      class="scroll-hint"
      onclick="
        document.getElementById('rsvp').scrollIntoView({ behavior: 'smooth' })
      "
    >
      <span class="scroll-hint-text" data-i18n="rsvp_btn"></span>
      <div class="scroll-hint-arrow"></div>
    </div>

    <!-- ============================================= -->
    <!--          CARTE 2 â€” FORMULAIRE RSVP             -->
    <!-- ============================================= -->
    <section class="card card-rsvp" id="rsvp">
      <div id="rsvp-form-wrapper">
        <h2 class="form-title" data-i18n="form_title"></h2>
        <p class="form-subtitle" data-i18n="form_subtitle"></p>

        <!-- PrÃ©nom + Nom (pour retrouver dans le Sheet) -->
        <div class="form-row">
          <div class="form-group">
            <label class="form-label" data-i18n="label_firstName"></label>
            <input
              class="form-input"
              type="text"
              id="field-firstName"
              required
            />
          </div>
          <div class="form-group">
            <label class="form-label" data-i18n="label_lastName"></label>
            <input
              class="form-input"
              type="text"
              id="field-lastName"
              required
            />
          </div>
        </div>

        <!-- PrÃ©sence (Comes?) -->
        <div class="form-group" style="margin-bottom: 2rem">
          <label class="form-label" data-i18n="label_comes"></label>
          <div class="comes-toggle" id="comes-toggle">
            <button
              type="button"
              class="comes-btn comes-btn--yes active"
              id="comes-yes"
              onclick="setComes(true)"
              data-i18n="comes_yes"
            ></button>
            <button
              type="button"
              class="comes-btn comes-btn--no"
              id="comes-no"
              onclick="setComes(false)"
              data-i18n="comes_no"
            ></button>
          </div>
        </div>

        <!-- Champs affichÃ©s seulement si "Je viens" -->
        <div id="comes-details">
          <!-- Email + Nombre d'invitÃ©s -->
          <div class="form-row">
            <div class="form-group">
              <label class="form-label" data-i18n="label_email"></label>
              <input class="form-input" type="email" id="field-email" />
            </div>
            <div class="form-group">
              <label class="form-label" data-i18n="label_guests"></label>
              <input
                class="form-input"
                type="number"
                id="field-guests"
                min="0"
                max="20"
                value="0"
                style="max-width: 100%"
              />
            </div>
          </div>

          <!-- Parking -->
          <div class="form-checkbox-group">
            <input class="form-checkbox" type="checkbox" id="field-parking" />
            <label
              class="form-checkbox-label"
              for="field-parking"
              data-i18n="label_parking"
            ></label>
          </div>

          <!-- Restrictions alimentaires -->
          <div class="form-group">
            <label class="form-label" data-i18n="label_restrictions"></label>
            <input class="form-input" type="text" id="field-restrictions" />
          </div>
        </div>

        <!-- Message (toujours visible) -->
        <div class="form-group">
          <label class="form-label" data-i18n="label_message"></label>
          <textarea
            class="form-textarea"
            id="field-message"
            rows="3"
          ></textarea>
        </div>

        <button
          class="form-submit"
          id="submit-btn"
          data-i18n="submit"
          onclick="submitRSVP()"
        ></button>

        <p class="form-status" id="form-status"></p>
      </div>

      <!-- Message de succÃ¨s -->
      <div class="success-message" id="success-message">
        <div class="success-icon">âœ¦</div>
        <p class="success-text" data-i18n="success_title"></p>
        <p class="success-sub" data-i18n="success_sub"></p>
      </div>
    </section>

    <script>
      /* ==========================================================
       *  ðŸŽ¯ PERSONNALISE ICI â€” DONNÃ‰ES DU MARIAGE
       * ==========================================================
       *
       *  Modifie ces 3 constantes :
       *  1. WEDDING_DATE     â†’ Date et heure du mariage
       *  2. APPS_SCRIPT_URL  â†’ URL du script Google Apps Script
       *  3. TRANSLATIONS     â†’ Textes dans chaque langue
       *
       * ========================================================== */

      /**
       * Date du mariage.
       * Format : new Date(annÃ©e, mois - 1, jour, heure, minute)
       * âš ï¸ Les mois commencent Ã  0 (janvier=0, juin=5)
       */
      const WEDDING_DATE = new Date(2026, 9, 5, 16, 0); // 5 octobre 2026, 16h

      /**
       * URL du Google Apps Script dÃ©ployÃ©.
       * â†’ Suis les instructions en haut du fichier pour l'obtenir.
       * â†’ Ressemble Ã  : https://script.google.com/macros/s/XXXXX/exec
       *
       * Tant que vide â†’ mode dÃ©mo (log en console, pas d'envoi)
       */
      const APPS_SCRIPT_URL =
        "https://script.google.com/macros/s/AKfycbzrZqOYMKBRcA1BLD6W-kLMuUFV1E_Ol5n88Uizg19gUwdX9inqqJGGJR2n8T4JY0BW/exec";

      /**
       * Traductions.
       *
       * Le formulaire utilise firstName + lastName pour retrouver
       * l'invitÃ© dans Sheet1 (colonnes A + B).
       *
       * "guests" = accompagnants supplÃ©mentaires (colonne C).
       * Le Total (colonne F) est calculÃ© par ta formule =1+SUM(C).
       */
      const TRANSLATIONS = {
        fr: {
          // -- Save the Date --
          name1: "Adrien",
          name2: "Alina",
          eyebrow:
            "Les familles Meyer / Krief et Fooks ont le plaisir de vous annoncer le mariage de",
          date: "5 Octobre 2026",
          venue: "Beit Andromeda, Tel Aviv",
          message:
            "Plus de dÃ©tails suivront bientÃ´t.\nNous espÃ©rons vous compter parmi nous.",
          rsvp_btn: "Confirmez votre prÃ©sence",

          // -- Formulaire --
          form_title: "Confirmer votre prÃ©sence",
          form_subtitle: "Merci de remplir le formulaire ci-dessous",
          label_firstName: "PrÃ©nom",
          label_lastName: "Nom de famille",
          label_email: "Email",
          label_guests: "Accompagnants",
          label_parking: "J'ai besoin d'une place de parking",
          label_restrictions: "Restrictions alimentaires (optionnel)",
          label_message: "Un petit mot (optionnel)",
          label_comes: "Serez-vous prÃ©sent(e) ?",
          comes_yes: "Oui, je serai lÃ  !",
          comes_no: "Malheureusement non",
          submit: "Envoyer",
          sending: "Envoi en coursâ€¦",
          success_title: "Merci !",
          success_sub:
            "RÃ©ponse enregistrÃ©e.\nNous avons hÃ¢te de vous voir \n Ã  Tel Aviv en octobre !",
          success_title_no: "Merci de votre rÃ©ponse",
          success_sub_no:
            "Nous sommes dÃ©solÃ©s que vous ne puissiez pas venir.\nVous nous manquerez !",
          error: "Une erreur est survenue. Veuillez rÃ©essayer.",
          error_name: "Merci d'indiquer votre prÃ©nom et nom.",

          // -- Countdown --
          days: "Jours",
          hours: "Heures",
          minutes: "Minutes",
          seconds: "Secondes",
        },

        en: {
          name1: "Adrien",
          name2: "Alina",
          eyebrow:
            "The Meyer / Krief and Fooks families are delighted to announce the marriage of",
          date: "October 5, 2026",
          venue: "Beit Andromeda, Tel Aviv",
          message:
            "More details coming soon.\nWe canâ€™t wait to see you all \n in Tel Aviv this October!",
          rsvp_btn: "RSVP",

          form_title: "RSVP",
          form_subtitle: "Please fill in the form below",
          label_firstName: "First name",
          label_lastName: "Last name",
          label_email: "Email",
          label_guests: "Additional guests",
          label_parking: "I need a parking spot",
          label_restrictions: "Dietary restrictions (optional)",
          label_message: "Want to add a note? (optional)",
          label_comes: "Will you be attending?",
          comes_yes: "Yes, I'll be there!",
          comes_no: "Unfortunately not",
          submit: "Submit",
          sending: "Sendingâ€¦",
          success_title: "Thank you!",
          success_sub:
            "Your response has been recorded.\nWe look forward to seeing you!",
          success_title_no: "Thank you for letting us know",
          success_sub_no: "We're sorry you can't make it.\nYou'll be missed!",
          error: "Something went wrong. Please try again.",
          error_name: "Please enter your first and last name.",

          days: "Days",
          hours: "Hours",
          minutes: "Minutes",
          seconds: "Seconds",
        },

        he: {
          name1: "××“×¨×™××Ÿ",
          name2: "××œ×™× ×”",
          eyebrow: "×ž×©×¤×—×•×ª ×ž××™×™×¨ / ×§×¨×™×£ ×•×¤×•×§×¡ ×©×ž×—×•×ª ×œ×”×•×“×™×¢ ×¢×œ × ×™×©×•××™×”× ×©×œ",
          date: "5 ×‘××•×§×˜×•×‘×¨ 2026",
          venue: "×‘×™×ª ×× ×“×¨×•×ž×“×”, ×ª×œ ××‘×™×‘",
          message: "×¤×¨×˜×™× × ×•×¡×¤×™× ×‘×§×¨×•×‘.\n× ×©×ž×— ×œ×—×’×•×’ ××™×ª×›×.",
          rsvp_btn: "××™×©×•×¨ ×”×’×¢×”",

          form_title: "××™×©×•×¨ ×”×’×¢×”",
          form_subtitle: "×× × ×ž×œ××• ××ª ×”×˜×•×¤×¡",
          label_firstName: "×©× ×¤×¨×˜×™",
          label_lastName: "×©× ×ž×©×¤×—×”",
          label_email: "××™×ž×™×™×œ",
          label_guests: "×ž×œ×•×•×™× × ×•×¡×¤×™×",
          label_parking: "×× ×™ ×¦×¨×™×š/×” ×—× ×™×™×”",
          label_restrictions: "(×”×’×‘×œ×•×ª ×ª×–×•× ×ª×™×•×ª (×œ× ×—×•×‘×”",
          label_message: "×”×¢×¨×” (×œ× ×—×•×‘×”)",
          label_comes: "?×”×× ×ª×’×™×¢×•",
          comes_yes: "!×›×Ÿ, ××’×™×¢",
          comes_no: "×œ×¦×¢×¨×™ ×œ×",
          submit: "×©×œ×™×—×”",
          sending: "×©×•×œ×—â€¦",
          success_title: "!×ª×•×“×”",
          success_sub: "×ª×©×•×‘×ª×›× × ×¨×©×ž×”.\n!× ×©×ž×— ×œ×¨××•×ª×›×",
          success_title_no: "×ª×•×“×” ×¢×œ ×”×ª×©×•×‘×”",
          success_sub_no: "!×—×‘×œ ×©×œ× ×ª×•×›×œ×• ×œ×”×’×™×¢.\n× ×ª×’×¢×’×¢ ××œ×™×›×",
          error: "××™×¨×¢×” ×©×’×™××”. ×× × × ×¡×• ×©×•×‘.",
          error_name: "×× × ×”×–×™× ×• ×©× ×¤×¨×˜×™ ×•×©× ×ž×©×¤×—×”.",

          days: "×™×ž×™×",
          hours: "×©×¢×•×ª",
          minutes: "×“×§×•×ª",
          seconds: "×©× ×™×•×ª",
        },

        ru: {
          name1: "ÐÐ´Ñ€Ð¸Ð°Ð½",
          name2: "ÐÐ»Ð¸Ð½Ð°",
          eyebrow:
            "Ð¡ÐµÐ¼ÑŒÐ¸ ÐœÐµÐ¹ÐµÑ€ / ÐšÑ€Ð¸Ñ„ Ð¸ Ð¤ÑƒÐºÑ Ñ€Ð°Ð´Ñ‹ ÑÐ¾Ð¾Ð±Ñ‰Ð¸Ñ‚ÑŒ Ð¾ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð¾ÑÑ‰ÐµÐ¹ ÑÐ²Ð°Ð´ÑŒÐ±Ðµ.",
          date: "5 Ð¾ÐºÑ‚ÑÐ±Ñ€Ñ 2026",
          venue: "Ð‘ÐµÐ¹Ñ‚ ÐÐ½Ð´Ñ€Ð¾Ð¼ÐµÐ´Ð°, Ð¢ÐµÐ»ÑŒ-ÐÐ²Ð¸Ð²",
          message:
            "ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ð¾ÑÑ‚Ð¸ â€” Ð² Ð±Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐµÐµ Ð²Ñ€ÐµÐ¼Ñ.\nÐ‘ÑƒÐ´ÐµÐ¼ Ñ€Ð°Ð´Ñ‹ Ð²Ð¸Ð´ÐµÑ‚ÑŒ Ð²Ð°Ñ \n Ð² Ð¢ÐµÐ»ÑŒ-ÐÐ²Ð¸Ð²Ðµ Ð² Ð¾ÐºÑ‚ÑÐ±Ñ€Ðµ!",
          rsvp_btn: "ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¸ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ðµ",

          form_title: "ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ðµ",
          form_subtitle: "ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð·Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ñ„Ð¾Ñ€Ð¼Ñƒ",
          label_firstName: "Ð˜Ð¼Ñ",
          label_lastName: "Ð¤Ð°Ð¼Ð¸Ð»Ð¸Ñ",
          label_email: "Ð­Ð»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð°Ñ Ð¿Ð¾Ñ‡Ñ‚Ð°",
          label_guests: "Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð³Ð¾ÑÑ‚Ð¸",
          label_parking: "ÐœÐ½Ðµ Ð½ÑƒÐ¶Ð½Ð° Ð¿Ð°Ñ€ÐºÐ¾Ð²ÐºÐ°",
          label_restrictions: "Ð”Ð¸ÐµÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ (Ð½ÐµÐ¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾)",
          label_message: "Ð¥Ð¾Ñ‚Ð¸Ñ‚Ðµ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ? (Ð½ÐµÐ¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾)",
          label_comes: "Ð’Ñ‹ Ð¿Ñ€Ð¸Ð´Ñ‘Ñ‚Ðµ?",
          comes_yes: "Ð”Ð°, Ð±ÑƒÐ´Ñƒ!",
          comes_no: "Ðš ÑÐ¾Ð¶Ð°Ð»ÐµÐ½Ð¸ÑŽ, Ð½ÐµÑ‚",
          submit: "ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ",
          sending: "ÐžÑ‚Ð¿Ñ€Ð°Ð²ÐºÐ°â€¦",
          success_title: "Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾!",
          success_sub:
            "Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾! ÐœÑ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð»Ð¸ Ð²Ð°Ñˆ Ð¾Ñ‚Ð²ÐµÑ‚.\nÐ–Ð´Ñ‘Ð¼ Ð²ÑÑ‚Ñ€ÐµÑ‡Ð¸ Ñ Ð½ÐµÑ‚ÐµÑ€Ð¿ÐµÐ½Ð¸ÐµÐ¼!",
          success_title_no: "Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾ Ð·Ð° Ð¾Ñ‚Ð²ÐµÑ‚",
          success_sub_no: "Ð–Ð°Ð»ÑŒ, Ñ‡Ñ‚Ð¾ Ð²Ñ‹ Ð½Ðµ ÑÐ¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ñ€Ð¸Ð¹Ñ‚Ð¸.\nÐ‘ÑƒÐ´ÐµÐ¼ ÑÐºÑƒÑ‡Ð°Ñ‚ÑŒ!",
          error: "ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ°. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÐµÑ‰Ñ‘ Ñ€Ð°Ð·.",
          error_name: "ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, ÑƒÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð¸Ð¼Ñ Ð¸ Ñ„Ð°Ð¼Ð¸Ð»Ð¸ÑŽ.",

          days: "Ð”Ð½ÐµÐ¹",
          hours: "Ð§Ð°ÑÐ¾Ð²",
          minutes: "ÐœÐ¸Ð½ÑƒÑ‚",
          seconds: "Ð¡ÐµÐºÑƒÐ½Ð´",
        },
      };

      /* ==========================================================
       *  âš™ï¸  LOGIQUE â€” Pas besoin de modifier en dessous
       * ========================================================== */

      const RTL_LANGS = ["he", "ar"];
      let currentLang = "fr";

      /* ---------- DÃ©tection de la langue ---------- */
      function detectLang() {
        const browserLangs = navigator.languages
          ? navigator.languages.map((l) => l.substring(0, 2))
          : [navigator.language.substring(0, 2)];
        const supported = Object.keys(TRANSLATIONS);
        for (const lang of browserLangs) {
          if (supported.includes(lang)) return lang;
        }
        return "fr";
      }

      /* ---------- Musique ---------- */
      const bgMusic = document.getElementById("bg-music");
      const musicBtn = document.getElementById("music-btn");

      function startMusic() {
        if (bgMusic.paused) {
          bgMusic.play().then(() => {
            musicBtn.textContent = "â¸";
            musicBtn.classList.add("playing");
          }).catch(() => {});
        }
      }

      // Autoplay dÃ¨s la premiÃ¨re interaction utilisateur
      function autoplayOnce() {
        startMusic();
        document.removeEventListener("click", autoplayOnce);
        document.removeEventListener("touchstart", autoplayOnce);
        document.removeEventListener("scroll", autoplayOnce);
      }
      document.addEventListener("click", autoplayOnce, { once: true });
      document.addEventListener("touchstart", autoplayOnce, { once: true });
      document.addEventListener("scroll", autoplayOnce, { once: true });

      function toggleMusic() {
        if (bgMusic.paused) {
          bgMusic.play();
          musicBtn.textContent = "â¸";
          musicBtn.classList.add("playing");
        } else {
          bgMusic.pause();
          musicBtn.textContent = "â–¶";
          musicBtn.classList.remove("playing");
        }
      }

      /* ---------- Appliquer une langue ---------- */
      function setLang(lang) {
        const t = TRANSLATIONS[lang];
        if (!t) return;
        currentLang = lang;

        // Direction RTL
        const isRTL = RTL_LANGS.includes(lang);
        document.documentElement.dir = isRTL ? "rtl" : "ltr";
        document.documentElement.lang = lang;
        document.documentElement.setAttribute("data-lang", lang);

        // Textes data-i18n
        document.querySelectorAll("[data-i18n]").forEach((el) => {
          const key = el.getAttribute("data-i18n");
          if (t[key]) el.innerHTML = t[key].replace(/\n/g, "<br>");
        });

        // Placeholders
        document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
          const key = el.getAttribute("data-i18n-placeholder");
          if (t[key]) el.placeholder = t[key];
        });

        // PrÃ©noms
        document.getElementById("names").innerHTML =
          `${t.name1}<span class="ampersand">&</span>${t.name2}`;

        // Titre page
        document.title = `Save the Date â€” ${t.name1} & ${t.name2}`;

        // Bouton actif
        document
          .querySelectorAll(".lang-btn")
          .forEach((btn) =>
            btn.classList.toggle(
              "active",
              btn.getAttribute("data-lang") === lang,
            ),
          );

        updateCountdown();
      }

      /* ---------- Compte Ã  rebours ---------- */
      function updateCountdown() {
        const diff = Math.max(0, WEDDING_DATE - new Date());
        const t = TRANSLATIONS[currentLang];
        const units = [
          { value: Math.floor(diff / 86400000), label: t.days },
          { value: Math.floor((diff / 3600000) % 24), label: t.hours },
          { value: Math.floor((diff / 60000) % 60), label: t.minutes },
          { value: Math.floor((diff / 1000) % 60), label: t.seconds },
        ];
        document.getElementById("countdown").innerHTML = units
          .map(
            (u) => `
            <div class="countdown-item">
                <div class="countdown-number">${u.value}</div>
                <div class="countdown-label">${u.label}</div>
            </div>
        `,
          )
          .join("");
      }

      /* ---------- Toggle "Je viens / Je ne viens pas" ---------- */
      let comesValue = true;

      function setComes(val) {
        comesValue = val;
        document.getElementById("comes-yes").classList.toggle("active", val);
        document.getElementById("comes-no").classList.toggle("active", !val);
        document
          .getElementById("comes-details")
          .classList.toggle("hidden", !val);
      }

      /* ---------- Envoi du formulaire RSVP ---------- */
      async function submitRSVP() {
        const t = TRANSLATIONS[currentLang];
        const btn = document.getElementById("submit-btn");
        const status = document.getElementById("form-status");

        const firstName = document
          .getElementById("field-firstName")
          .value.trim();
        const lastName = document.getElementById("field-lastName").value.trim();
        const email = document.getElementById("field-email").value.trim();
        const guests = comesValue
          ? document.getElementById("field-guests").value
          : "0";
        const parking = comesValue
          ? document.getElementById("field-parking").checked
          : false;
        const message = document.getElementById("field-message").value.trim();
        const restrictions = comesValue
          ? document.getElementById("field-restrictions").value.trim()
          : "";
        const comes = comesValue;

        if (!firstName || !lastName) {
          status.textContent = t.error_name;
          status.className = "form-status error";
          return;
        }

        btn.disabled = true;
        status.textContent = t.sending;
        status.className = "form-status sending";

        /**
         * Payload envoyÃ© au Apps Script.
         *
         * Colonnes du Sheet :
         *   A: First Name | B: Last Name | C: Guests | D: Phone Number
         *   E: Telegram username | F: Comes? | G: Parking lot
         *   H: Email | I: Statut RSVP | J: Total (formule)
         *   K: Restrictions alimentaires | L: Message
         *   M: Date de rÃ©ponse | N: lang
         */
        const payload = {
          firstName,
          lastName,
          email,
          guests,
          parking,
          message,
          restrictions,
          comes,
          lang: currentLang,
        };

        try {
          if (!APPS_SCRIPT_URL) {
            // Mode dÃ©mo
            console.log("ðŸ“‹ Mode dÃ©mo â€” RSVP data:", payload);
            await new Promise((r) => setTimeout(r, 800));
          } else {
            await fetch(APPS_SCRIPT_URL, {
              method: "POST",
              mode: "no-cors",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(payload),
            });
          }

          // SuccÃ¨s â€” affiche le bon message selon comes/pas comes
          const t2 = TRANSLATIONS[currentLang];
          const successTitle = document.querySelector(
            "#success-message .success-text",
          );
          const successSub = document.querySelector(
            "#success-message .success-sub",
          );

          if (comesValue) {
            successTitle.innerHTML = t2.success_title;
            successSub.innerHTML = (t2.success_sub || "").replace(
              /\n/g,
              "<br>",
            );
          } else {
            successTitle.innerHTML = t2.success_title_no || t2.success_title;
            successSub.innerHTML = (
              t2.success_sub_no ||
              t2.success_sub ||
              ""
            ).replace(/\n/g, "<br>");
          }

          document.getElementById("rsvp-form-wrapper").style.display = "none";
          document.getElementById("success-message").classList.add("visible");
        } catch (err) {
          console.error("Erreur RSVP:", err);
          status.textContent = t.error;
          status.className = "form-status error";
          btn.disabled = false;
        }
      }

      /* ==========================================================
       *  ðŸš€ DÃ‰MARRAGE
       * ========================================================== */
      setLang(detectLang());
      setInterval(updateCountdown, 1000);

      /**
       * PrÃ©-remplissage du formulaire via l'URL.
       *
       * Deux paramÃ¨tres supportÃ©s :
       *   ?p=33640158915   â†’ recherche par tÃ©lÃ©phone (col D)
       *   ?t=john_doe      â†’ recherche par Telegram username (col E)
       *
       * Si trouvÃ© â†’ prÃ©-remplit prÃ©nom, nom, email.
       * Les champs nom/prÃ©nom passent en lecture seule.
       */
      (async function prefillFromURL() {
        const params = new URLSearchParams(window.location.search);
        const phone = params.get("p");
        const tgUser = params.get("t");

        if ((!phone && !tgUser) || !APPS_SCRIPT_URL) return;

        try {
          let url = APPS_SCRIPT_URL;
          if (phone) {
            url += "?p=" + encodeURIComponent(phone);
          } else if (tgUser) {
            url += "?t=" + encodeURIComponent(tgUser);
          }

          const resp = await fetch(url);
          const data = await resp.json();

          if (data.found) {
            const fnField = document.getElementById("field-firstName");
            const lnField = document.getElementById("field-lastName");
            const emField = document.getElementById("field-email");

            fnField.value = data.firstName || "";
            lnField.value = data.lastName || "";
            emField.value = data.email || "";

            fnField.readOnly = true;
            lnField.readOnly = true;
            fnField.style.opacity = "0.7";
            lnField.style.opacity = "0.7";
          }
        } catch (err) {
          console.warn("Prefill Ã©chouÃ©:", err);
        }
      })();
    </script>
  </body>
</html>
